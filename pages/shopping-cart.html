<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css"
    />
    <title>Onon_cake｜購物車</title>
  </head>
  <body>
    <%- include('./layout/header-login'); -%>

    <!-- 上半部 -->
    <section class="bg-neutral-50">
      <div class="container">
        <!-- 購物車商品清單 -->
        <h2 class="fs-3 fs-md-2 text-black pt-8 pt-md-12 mb-6 mb-md-8">
          購物車商品清單
        </h2>

        <div>
          <!-- 購物車標題列 -->
          <div class="row">
            <ul
              class="list-unstyled fs-md-7 fs-lg-6 px-7 mb-4 d-none d-md-flex"
              style="color: #6f6f6f"
            >
              <li class="col-md-7 text-center">商品資料</li>
              <li class="col-md-1 text-center">單價</li>
              <li class="col-md-2 text-center">數量</li>
              <li class="col-md-1 text-center">小計</li>
              <li class="col-md-1 text-center">刪除</li>
            </ul>
          </div>

          <ul class="list-group">
            <!-- 商品 1 -->
            <li class="list-group-item rounded-4 px-7 py-4 mb-4">
              <div class="row align-items-center g-4">
                <div class="col-12 col-md-7 d-flex align-items-center">
                  <img
                    src="/assets/images/original-basque.png"
                    class="rounded me-4"
                    style="width: 80px; height: 80px"
                    alt="超濃厚巴斯克"
                  />
                  <div>
                    <h5 class="fs-6 fs-md-5">超濃厚巴斯克</h5>
                    <p class="fs-6 fw-bold mt-2 d-md-none">NT$ 590</p>
                  </div>
                </div>
                <div class="col-md-1 d-none d-md-block">
                  <p class="fs-6 fw-bold text-center">NT$ 590</p>
                </div>
                <div class="col-12 col-md-4">
                  <div class="row align-items-center">
                    <div
                      class="col-5 col-md-6 d-flex justify-content-md-center"
                    >
                      <div
                        class="input-group input-group-sm border rounded-2 bg-white"
                        style="width: 130px"
                      >
                        <button class="btn btn-decrease" type="button">
                          <i class="bi bi-dash-lg"></i>
                        </button>
                        <input
                          type="number"
                          class="form-control fs-6 fw-bold text-center border-0 quantity-input"
                          value="1"
                          min="1"
                        />
                        <button class="btn btn-increase" type="button">
                          <i class="bi bi-plus-lg"></i>
                        </button>
                      </div>
                    </div>
                    <div class="col-5 col-md-3">
                      <p class="fs-5 fw-bold text-secondary-500 text-center">
                        NT$ 590
                      </p>
                    </div>
                    <div class="col-2 col-md-3 text-center">
                      <button class="btn btn-trash">
                        <i class="bi bi-trash3-fill"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <!-- 商品 2 -->
            <li class="list-group-item rounded-4 px-7 py-4 mb-4">
              <div class="row align-items-center g-4">
                <div class="col-12 col-md-7 d-flex align-items-center">
                  <img
                    src="/assets/images/product-canele6.png"
                    class="rounded me-4"
                    style="width: 80px; height: 80px"
                    alt="經典可麗露禮盒"
                  />
                  <div>
                    <h5 class="fs-6 fs-md-5">經典可麗露禮盒 (6入/盒)</h5>
                    <p class="fs-6 fw-bold mt-2 d-md-none">NT$ 420</p>
                  </div>
                </div>
                <div class="col-md-1 d-none d-md-block">
                  <p class="fs-6 fw-bold text-center">NT$ 420</p>
                </div>
                <div class="col-12 col-md-4">
                  <div class="row align-items-center">
                    <div
                      class="col-5 col-md-6 d-flex justify-content-md-center"
                    >
                      <div
                        class="input-group input-group-sm border rounded-2 bg-white"
                        style="width: 130px"
                      >
                        <button class="btn btn-decrease" type="button">
                          <i class="bi bi-dash-lg"></i>
                        </button>
                        <input
                          type="number"
                          class="form-control fs-6 fw-bold text-center border-0 quantity-input"
                          value="2"
                          min="1"
                        />
                        <button class="btn btn-increase" type="button">
                          <i class="bi bi-plus-lg"></i>
                        </button>
                      </div>
                    </div>
                    <div class="col-5 col-md-3">
                      <p class="fs-5 fw-bold text-secondary-500 text-center">
                        NT$ 840
                      </p>
                    </div>
                    <div class="col-2 col-md-3 text-center">
                      <button class="btn btn-trash">
                        <i class="bi bi-trash3-fill"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </div>

        <!-- 使用紅利點數與結帳總金額區塊 -->
        <div class="row g-3">
          <!-- 紅利點數 -->
          <div class="col-12 col-md-4 mt-4">
            <div
              class="p-5 p-md-6 border rounded-4"
              style="background-color: #ffffff"
            >
              <label class="form-label d-block mb-1"
                >可用點數：10點，本次使用</label
              >
              <div class="row g-2">
                <!-- 輸入框：手機滿版、桌機佔剩餘空間 -->
                <div class="col-12 col-md pe-3 mb-4 mb-md-0">
                  <input
                    type="number"
                    class="form-control coupons"
                    placeholder="請輸入紅利點數"
                  />
                </div>
                <!-- 使用：手機 50%，桌機自動寬度 -->
                <div class="col-6 col-md-auto">
                  <button class="btn use-btn w-100">使用</button>
                </div>
                <!-- 清除：手機 50%，桌機自動寬度 -->
                <div class="col-6 col-md-auto">
                  <button class="btn btn-primary w-100">清除</button>
                </div>
              </div>
            </div>
          </div>

          <!-- 優惠碼 -->
          <div class="col-12 col-md-4 mt-4">
            <div
              class="p-5 p-md-6 border rounded-4"
              style="background-color: #ffffff"
            >
              <label class="form-label d-block mb-1">優惠碼</label>
              <div class="row g-2">
                <div class="col-12 col-md pe-3 mb-4 mb-md-0">
                  <input
                    type="text"
                    class="form-control coupons"
                    placeholder="請輸入優惠碼"
                  />
                </div>
                <div class="col-6 col-md-auto">
                  <button class="btn use-btn w-100">使用</button>
                </div>
                <div class="col-6 col-md-auto">
                  <button class="btn btn-primary w-100">清除</button>
                </div>
              </div>
            </div>
          </div>

          <!-- 優惠券 -->
          <div class="col-12 col-md-4 mt-4">
            <div
              class="p-5 p-md-6 border rounded-4"
              style="background-color: #ffffff"
            >
              <label class="form-label d-block mb-1">優惠券</label>
              <div class="row g-2">
                <div class="col-12 col-md pe-3 mb-4 mb-md-0">
                  <select class="form-select coupons">
                    <option selected>請選擇優惠券</option>
                    <option value="1">優惠券 A</option>
                    <option value="2">優惠券 B</option>
                  </select>
                </div>
                <div class="col-6 col-md-auto">
                  <button class="btn use-btn w-100">使用</button>
                </div>
                <div class="col-6 col-md-auto">
                  <button class="btn btn-primary w-100">清除</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 訂單金額區塊 -->
        <div class="row mt-4 pb-8 pb-md-12">
          <div class="col-12">
            <div
              class="p-5 p-md-6 border rounded-4"
              style="background-color: #ffffff"
            >
              <div
                class="d-flex justify-content-between pb-2 fs-7 fs-md-6 fs-7 fs-md-6"
              >
                <span>小計</span>
                <span>$ 10,000</span>
              </div>
              <div class="d-flex justify-content-between pb-2 fs-7 fs-md-6">
                <span>運費</span>
                <span>$ 0</span>
              </div>
              <div class="d-flex justify-content-between pb-2 fs-7 fs-md-6">
                <span>點數</span>
                <span>- $ 50</span>
              </div>
              <div class="d-flex justify-content-between pb-2 fs-7 fs-md-6">
                <span>優惠碼</span>
                <span>- $ 50</span>
              </div>
              <div class="d-flex justify-content-between fs-7 fs-md-6">
                <span>優惠券</span>
                <span>- $ 50</span>
              </div>
              <hr class="my-2" />
              <div class="d-flex justify-content-between">
                <span class="h5" style="font-weight: 500">總金額</span>
                <span class="text-secondary h4">NT$ 9,850</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 下半部 -->
    <!-- 填寫資訊區塊 -->
    <section class="container">
      <div class="shipping-info">
        <h2 class="mt-lg-12 mb-lg-8 mt-8 mb-6">填寫資訊</h2>
        <form class="cart-border p-6 mb-6">
          <!-- 同會員資料 -->
          <div class="form-check mb-4">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="sameAsMember"
            />
            <label class="form-check-label" for="sameAsMember"
              >同會員資料</label
            >
          </div>

          <!-- 收件人姓名 & 聯絡電話 -->
          <div class="gap-2 mb-4 d-md-flex">
            <div style="flex: 1" class="mb-4 mb-md-0">
              <label for="recipientName" class="form-label"
                >收件人姓名 <span class="text-danger">*</span></label
              >
              <input
                type="text"
                class="form-control placeholder-neutral-500"
                id="recipientName"
                placeholder="請填寫姓名"
                style="height: 40px; width: 100%"
              />
            </div>
            <div style="flex: 1">
              <label for="phone" class="form-label"
                >聯絡電話 <span class="text-danger">*</span></label
              >
              <input
                type="text"
                class="form-control placeholder-neutral-500"
                id="phone"
                placeholder="請填寫聯絡電話"
                style="height: 40px; width: 100%"
              />
            </div>
          </div>

          <!-- 收件地址 -->
          <div class="mb-4">
            <label class="form-label"
              >收件地址 <span class="text-danger">*</span></label
            >
            <div
              class="d-flex flex-wrap gap-2 mb-4 d-flex flex-wrap flex-md-nowrap"
            >
              <div class="address-col-200 mb-md-0">
                <input
                  type="text"
                  class="form-control placeholder-neutral-500"
                  placeholder="郵遞區號"
                  style="height: 40px"
                />
              </div>
              <div class="address-col-200 mb-md-0">
                <select
                  class="form-select text-neutral-500"
                  id="city-select"
                  style="height: 40px"
                >
                  <option value="" disabled selected>縣市</option>
                </select>
              </div>
              <div class="address-col-200 mb-md-0">
                <select
                  class="form-select text-neutral-500"
                  id="district-select"
                  style="height: 40px"
                >
                  <option value="" disabled selected>鄉鎮市區</option>
                </select>
              </div>
              <div class="address-col-624">
                <input
                  type="text"
                  class="form-control"
                  placeholder="請輸入地址"
                  style="height: 40px"
                />
              </div>
            </div>
          </div>

          <!-- 預計出貨日 -->
          <div class="mb-4">
            <label for="shipDate" class="form-label"
              >預計出貨日 <span class="text-danger">*</span></label
            >
            <div
              class="input-group shipdate-picker"
              style="max-width: 1248px; height: 40px"
            >
              <input
                type="text"
                class="form-control placeholder-neutral-500"
                id="shipDate"
                placeholder="請選擇日期"
              />
              <button
                class="btn btn-outline-neutral date-text-trigger"
                type="button"
              >
                <i class="bi bi-calendar"></i>
              </button>
            </div>
          </div>

          <!-- 備註 -->
          <div>
            <label for="remarks" class="form-label text-neutral-800"
              >備註</label
            >
            <textarea
              class="form-control resize-none placeholder-neutral-500"
              id="remarks"
              placeholder="請填寫備註"
              style="max-width: 1248px; height: 160px"
            ></textarea>
          </div>
        </form>
      </div>

      <!-- 付款方式 & 發票區塊 -->
      <div class="row flex-md-colomn g-6">
        <!-- 付款方式 -->
        <div class="col-md-6">
          <div class="cart-border p-6">
            <h5 class="text-neutral-800 mb-4">付款方式</h5>
            <div class="form-check py-2 ps-7">
              <input
                class="form-check-input"
                type="radio"
                name="paymemtMethod"
                id="creditCard"
                checked
              />
              <label class="form-check-label" for="creditCard">
                線上刷卡
              </label>
            </div>
            <div class="form-check py-2 ps-7">
              <input
                class="form-check-input"
                type="radio"
                name="paymemtMethod"
                id="linePay"
              />
              <label class="form-check-label" for="linePay"> LINE PAY </label>
            </div>
            <div class="form-check py-2 ps-7">
              <input
                class="form-check-input"
                type="radio"
                name="paymemtMethod"
                id="applePay"
              />
              <label class="form-check-label" for="applePay"> APPLE PAY </label>
            </div>
            <div class="form-check py-2 ps-7">
              <input
                class="form-check-input"
                type="radio"
                name="paymemtMethod"
                id="atmTransfer"
              />
              <label class="form-check-label" for="atmTransfer">
                ATM轉帳
              </label>
            </div>
          </div>
        </div>
        <!-- 發票開立 -->
        <div class="col-md-6">
          <div class="cart-border p-6">
            <h5 class="text-neutral-800 mb-4">發票開立</h5>
            <div class="mb-4">
              <select class="form-select" id="invoiceSelect">
                <option value="personalInvoice" selected>個人發票</option>
                <option value="companyInvoice">公司發票</option>
              </select>
            </div>

            <!-- 個人發票開立方式 -->
            <div class="invoice-block" id="personalBlock">
              <!-- 會員載具 -->
              <div class="form-check py-2 ps-7">
                <input
                  class="form-check-input"
                  type="radio"
                  name="invoiveCarrier"
                  id="memberCarrier"
                  checked
                />
                <label class="form-check-label" for="memberCarrier">
                  會員載具
                </label>
              </div>
              <!-- 條碼輸入 -->
              <div id="invoiceCollapseGroup">
                <!-- 手機條碼 -->
                <div class="d-flex flex-column flex-md-row">
                  <div class="form-check py-2 ps-7 me-8">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="invoiveCarrier"
                      id="mobileBarcode"
                      data-bs-toggle="collapse"
                      data-bs-target="#mobileBarcodeInput"
                    />
                    <label class="form-check-label" for="mobileBarcode">
                      手機條碼
                    </label>
                  </div>
                  <div
                    class="collapse flex-grow-1"
                    id="mobileBarcodeInput"
                    data-bs-parent="#invoiceCollapseGroup"
                  >
                    <input
                      class="form-control rounded-3"
                      type="text"
                      placeholder="請填寫手機條碼"
                      style="height: 40px"
                    />
                  </div>
                </div>
                <!-- 自然人憑證 -->
                <div class="d-flex flex-column flex-md-row">
                  <div class="form-check py-2 ps-7 me-8">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="invoiveCarrier"
                      id="citizenDigitalCertificate"
                      data-bs-toggle="collapse"
                      data-bs-target="#citizenDigitalCertificateInput"
                    />
                    <label
                      class="form-check-label"
                      for="citizenDigitalCertificate"
                    >
                      自然人憑證
                    </label>
                  </div>
                  <div
                    class="collapse flex-grow-1"
                    id="citizenDigitalCertificateInput"
                    data-bs-parent="#invoiceCollapseGroup"
                  >
                    <input
                      class="form-control rounded-3"
                      type="text"
                      placeholder="請填寫自然人憑證"
                      style="height: 40px"
                    />
                  </div>
                </div>
              </div>
            </div>

            <!--公司發票區塊-->
            <div class="invoice-block" id="companyBlock" style="display: none">
              <div class="mb-4">
                <label for="companyName" class="form-label">
                  公司抬頭<span class="fs-7 text-alert-500 align-top ms-1"
                    >*</span
                  >
                </label>
                <input
                  type="text"
                  class="form-control"
                  id="companyName"
                  placeholder="請填寫公司抬頭"
                />
              </div>
              <div class="mb-4">
                <label for="unifiedNumber" class="form-label">
                  統一編號<span class="fs-7 text-alert-500 align-top ms-1"
                    >*</span
                  >
                </label>
                <input
                  type="text"
                  class="form-control"
                  id="unifiedNumber"
                  placeholder="請填寫統一編號"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row justify-content-center">
        <button class="btn btn-primary w-50 mt-8 mb-12">
          <p>確認訂購</p>
        </button>
      </div>
    </section>

    <%- include('./layout/footer'); -%>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const decreaseBtn = document.querySelector(".btn-decrease");
        const increaseBtn = document.querySelector(".btn-increase");
        const input = document.querySelector(".quantity-input");

        // 減少
        decreaseBtn.addEventListener("click", () => {
          let currentValue = parseInt(input.value) || 1;
          if (currentValue > 1) {
            input.value = currentValue - 1;
          }
        });

        // 增加
        increaseBtn.addEventListener("click", () => {
          let currentValue = parseInt(input.value) || 1;
          input.value = currentValue + 1;
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // 取得所有商品的加減控制區
        document.querySelectorAll(".input-group").forEach((group) => {
          const decreaseBtn = group.querySelector(".btn-decrease");
          const increaseBtn = group.querySelector(".btn-increase");
          const input = group.querySelector(".quantity-input");

          // 減少
          decreaseBtn.addEventListener("click", () => {
            let currentValue = parseInt(input.value) || 1;
            if (currentValue > 1) {
              input.value = currentValue - 1;
            }
          });

          // 增加
          increaseBtn.addEventListener("click", () => {
            let currentValue = parseInt(input.value) || 1;
            input.value = currentValue + 1;
          });
        });
      });
    </script>

    <script type="module" src="/main.js"></script>
  </body>
</html>
